# Laravel Invoice Template Generator

A Laravel package for generating PDF invoices with customizable templates. Features header/footer support via Snappy PDF generator and database-driven content management.

## Features

- **Template Management**: Create and manage multiple invoice templates via database
- **Smart Placeholders**: Automatic system placeholders (date, time, user) + custom data
- **PDF Generation**: High-quality PDF output with header, content, and footer sections
- **Flexible Layouts**: Support for A4, A5, Letter, Legal, and custom page sizes
- **Security First**: Secure storage paths, not publicly accessible
- **Quality Options**: High, medium, and low quality presets

## Installation

Install the package via Composer:

```bash
composer require mikailfaruqali/invoice-template
```

Publish configuration and migrate:

```bash
php artisan vendor:publish --provider="Snawbar\InvoiceTemplate\InvoiceTemplateServiceProvider" --tag="config"
php artisan vendor:publish --provider="Snawbar\InvoiceTemplate\InvoiceTemplateServiceProvider" --tag="migrations"
php artisan migrate
```

## Requirements

Install wkhtmltopdf:

**Ubuntu/Debian:** `sudo apt-get install wkhtmltopdf`
**Windows:** Download from https://wkhtmltopdf.org/downloads.html

## Quick Start

### 1. Create a Template

```php
use Snawbar\InvoiceTemplate\InvoiceTemplate;

$request = new Request([
    'route' => 'client-invoice',
    'name' => 'Client Invoice Template',
    'header' => '<h1>{{company_name}}</h1><p>{{formatted_datetime}}</p>',
    'content' => '
        <h2>Invoice #{{invoice_number}}</h2>
        <p><strong>Client:</strong> {{client_name}}</p>
        <p><strong>Amount:</strong> {{total_amount}}</p>
        <p><strong>Date:</strong> {{current_date}}</p>
    ',
    'footer' => '<p>Thank you! Generated by {{current_user}}</p>'
]);

InvoiceTemplate::create($request);
```

### 2. Generate PDF

```php
// Display inline in browser
return InvoiceTemplate::route('client-invoice')
    ->withData([
        'company_name' => 'mikailfaruqali Solutions',
        'client_name' => 'John Doe',
        'invoice_number' => 'INV-2025-001',
        'total_amount' => '$1,500.00'
    ])
    ->a4()
    ->portrait()
    ->inline();

// Save to storage and get path
$path = InvoiceTemplate::route('client-invoice')
    ->withData([
        'company_name' => 'mikailfaruqali Solutions',
        'client_name' => 'Jane Smith',
        'invoice_number' => 'INV-2025-002'
    ])
    ->a4()
    ->save();

// Returns: /path/to/storage/invoice_client-invoice_mikailfaruqali_2025-08-20_13-27-39.pdf
```

## Available System Placeholders

```html
{{current_datetime}}    <!-- 2025-08-20 13:27:39 -->
{{current_user}}        <!-- mikailfaruqali -->
{{current_date}}        <!-- 2025-08-20 -->
{{current_time}}        <!-- 13:27:39 -->
{{formatted_datetime}}  <!-- August 20, 2025 01:27 PM -->
```

## PDF Options

```php
InvoiceTemplate::route('my-invoice')
    ->a4()              // Page size: a4, a5, letter, legal
    ->portrait()        // Orientation: portrait, landscape  
    ->highQuality()     // Quality: high, medium, low
    ->marginTop('15mm') // Custom margins
    ->headerSpacing(5)  // Header/footer spacing
    ->inline();
```

## Configuration

Customize in `config/snawbar-invoice-template.php`:

```php
return [
    'table' => 'invoice_templates',
    'storage' => ['path' => 'invoices'],
    'binary' => [
        'windows' => '"C:\Program Files\wkhtmltopdf\bin\wkhtmltopdf.exe"',
        'linux' => '/usr/local/bin/wkhtmltopdf',
    ],
    'options' => [
        'page-size' => 'A4',
        'orientation' => 'Portrait',
        'margin-top' => '10mm',
    ],
];
```

## Template Management

```php
// Get template
$template = InvoiceTemplate::getTemplate('route-name');

// Delete template  
InvoiceTemplate::deleteTemplate('route-name');
```

## Security

- PDFs stored in `storage/app/` (not publicly accessible)
- Safe placeholder replacement
- Configure access control as needed

## License

The MIT License (MIT). Please see [License File](LICENSE.md) for more information.

---

**Created by:** Mikail Faruq Ali | **Version:** 1.0.0